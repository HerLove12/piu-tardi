USE tardi;

CREATE TABLE utente(
	ID int(11) auto_increment ,
    password varchar(256) NOT NULL,
    nome varchar(30) NOT NULL,
    cognome varchar(30) NOT NULL,
    eta int(11),
    classe varchar(30),
    email varchar(30) NOT NULL,
	foto varchar(50),
    PRIMARY KEY(ID)
);

CREATE TABLE tipologia(
	ID int(11) auto_increment,
    	nome varchar(30),
	PRIMARY KEY(ID)
);

CREATE TABLE annuncio(
	ID int(11) auto_increment,
    nome varchar(30) NOT NULL,
    descrizioni varchar(50),
    foto varchar(50),
    datacaricamento date NOT NULL,
    ID_utente int(11) NOT NULL,
    ID_tipologia int(11) NOT NULL,
    PRIMARY KEY(ID),
    FOREIGN KEY(ID_utente) REFERENCES utente(ID) ON UPDATE CASCADE ON DELETE CASCADE,
    FOREIGN KEY(ID_tipologia) REFERENCES tipologia(ID) ON UPDATE CASCADE ON DELETE CASCADE
);


CREATE TABLE proposta(
	ID int(11) NOT NULL auto_increment,
    prezzo int(11) NOT NULL,
    ID_utente int(11) NOT NULL,
    dataproposta date,
    ID_annuncio int(11) NOT NULL,
    stato varchar(11),
    PRIMARY KEY(ID),
    FOREIGN KEY (ID_utente) REFERENCES utente(ID) ON UPDATE CASCADE ON DELETE CASCADE,
    FOREIGN KEY (ID_annuncio) REFERENCES annuncio(ID) ON UPDATE CASCADE ON DELETE CASCADE
);